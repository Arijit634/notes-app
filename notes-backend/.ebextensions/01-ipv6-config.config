# IPv6 Configuration for Elastic Beanstalk
# This file configures your EB environment to use IPv6, reducing IPv4 costs

# Save this as .ebextensions/01-ipv6-config.config in your backend project

option_settings:
  aws:ec2:vpc:
    AssociatePublicIpAddress: false  # Disable IPv4 public IP assignment
    
  aws:elbv2:loadbalancer:
    IpAddressType: dualstack  # Enable both IPv4 and IPv6
    
  aws:autoscaling:launchconfiguration:
    AssociatePublicIpAddress: false  # No public IPv4 for instances
    
commands:
  01_enable_ipv6:
    command: |
      # Enable IPv6 on the instance
      echo "net.ipv6.conf.all.disable_ipv6 = 0" >> /etc/sysctl.conf
      echo "net.ipv6.conf.default.disable_ipv6 = 0" >> /etc/sysctl.conf
      sysctl -p
